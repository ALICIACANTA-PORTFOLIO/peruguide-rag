# PeruGuide AI - Environment Variables Template
# Copy this file to .env and fill in your values

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME=PeruGuide AI
APP_VERSION=0.1.0
ENVIRONMENT=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================================================
# API SETTINGS
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true
API_WORKERS=1

# CORS Settings
CORS_ORIGINS=["http://localhost:3000", "http://localhost:8501"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# ============================================================================
# LLM SETTINGS (HuggingFace - FREE TIER)
# ============================================================================
# Default LLM Model (HuggingFace Inference API - Free)
LLM_DEFAULT_PROVIDER=huggingface
LLM_MODEL_NAME=mistralai/Mistral-7B-Instruct-v0.2

# HuggingFace Configuration
# Get your free token from: https://huggingface.co/settings/tokens
HUGGINGFACE_API_TOKEN=hf_your_token_here

# Performance Optimization
LLM_TEMPERATURE=0.3
LLM_MAX_TOKENS=800
LLM_TOP_P=0.95
LLM_TIMEOUT=120

# OpenAI (Optional - if you have credits)
# OPENAI_API_KEY=sk-...

# Local Model Path (if running locally with Ollama or similar)
# LLM_LOCAL_PATH=./models/mistral-7b-instruct

# ============================================================================
# EMBEDDING SETTINGS
# ============================================================================
EMBEDDING_MODEL_NAME=sentence-transformers/paraphrase-multilingual-mpnet-base-v2
EMBEDDING_DIMENSION=768
EMBEDDING_BATCH_SIZE=32
EMBEDDING_DEVICE=cpu  # cpu or cuda

# ============================================================================
# VECTOR STORE SETTINGS
# ============================================================================
VECTOR_STORE_TYPE=faiss
VECTOR_STORE_PATH=./data/vector_stores

# FAISS Settings (Recommended for this project)
FAISS_INDEX_TYPE=IndexFlatL2
FAISS_METRIC_TYPE=l2

# ChromaDB Settings
CHROMA_COLLECTION_NAME=peruguide_documents
CHROMA_PERSIST_DIRECTORY=./data/vector_stores/chroma

# ============================================================================
# RETRIEVAL SETTINGS (Optimized for Speed)
# ============================================================================
RETRIEVAL_TOP_K=3
RETRIEVAL_SCORE_THRESHOLD=0.65
RETRIEVAL_FETCH_K=10
RETRIEVAL_SEARCH_TYPE=similarity  # similarity or mmr

# Reranking (Disabled for better performance)
ENABLE_RERANKING=false

# ============================================================================
# DATA PROCESSING SETTINGS (AGNÓSTICO - Configurar según tus materiales)
# ============================================================================
# Chunking Configuration
CHUNK_SIZE=512
CHUNK_OVERLAP=64
CHUNK_SEPARATORS=["\n\n", "\n", ".", " ", ""]

# PDF Loading - CONFIGURAR SEGÚN TU FUENTE DE DATOS
# Ejemplos:
#   - PDF_SOURCE_DIR=./data/raw/pdfs
#   - PDF_SOURCE_DIR=./Complementarios Peru
#   - PDF_SOURCE_DIR=./data/raw/turismo
PDF_SOURCE_DIR=./data/raw
PDF_RECURSIVE=true
PDF_FILE_PATTERN=*.pdf  # Agnóstico: cualquier PDF

# Metadata Extraction (opcional, ajustar según necesidad)
EXTRACT_METADATA=true
METADATA_FIELDS=["filename", "category", "region"]  # Personalizable

# ============================================================================
# EVALUATION SETTINGS
# ============================================================================
ENABLE_RAGAS_EVALUATION=true
RAGAS_TEST_DATASET_PATH=./src/evaluation/test_dataset.json
RAGAS_METRICS=["faithfulness", "answer_relevancy", "context_precision", "context_recall"]

# RAGAS LLM (for evaluation)
RAGAS_LLM_MODEL=gpt-4  # Recommended: GPT-4 for best evaluation
RAGAS_LLM_TEMPERATURE=0.0

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Prometheus
ENABLE_METRICS=true
METRICS_PORT=9090

# Structured Logging
LOG_FORMAT=json  # json or console
LOG_FILE_PATH=./logs/peruguide.log
LOG_ROTATION=1 day
LOG_RETENTION=30 days

# Sentry (Error Tracking)
# SENTRY_DSN=https://...@sentry.io/...
# SENTRY_ENVIRONMENT=development

# ============================================================================
# SECURITY
# ============================================================================
# API Authentication (optional)
ENABLE_AUTH=false
# JWT_SECRET_KEY=your-secret-key-here-change-in-production
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION_HOURS=24

# API Keys for external access
# API_KEY_HEADER_NAME=X-API-Key
# VALID_API_KEYS=["key1", "key2"]

# ============================================================================
# DATABASE (PostgreSQL - for feedback/analytics/metadata)
# ============================================================================
# PostgreSQL Connection
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=peruguide
POSTGRES_USER=peruguide_user
POSTGRES_PASSWORD=changeme123

# Connection Pool Settings
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Database URL (constructed from above, or override)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Schema
DATABASE_SCHEMA=rag

# ============================================================================
# REDIS CACHE (Optional - for performance optimization)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=changeme123
REDIS_DB=0
REDIS_URL=redis://:{REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Cache Settings
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=500

# ============================================================================
# PGADMIN (Development Only)
# ============================================================================
PGADMIN_EMAIL=admin@peruguide.local
PGADMIN_PASSWORD=admin123
PGADMIN_PORT=5050

# ============================================================================
# STREAMLIT UI SETTINGS
# ============================================================================
STREAMLIT_SERVER_PORT=8501
STREAMLIT_SERVER_ADDRESS=0.0.0.0
STREAMLIT_BROWSER_GATHER_USAGE_STATS=false

# ============================================================================
# DEVELOPMENT SETTINGS
# ============================================================================
# Testing
PYTEST_TIMEOUT=300
TEST_COVERAGE_THRESHOLD=75

# Pre-commit
ENABLE_PRE_COMMIT_HOOKS=true

# ============================================================================
# DEPLOYMENT SETTINGS
# ============================================================================
# Docker
DOCKER_IMAGE_NAME=peruguide-rag
DOCKER_IMAGE_TAG=latest
DOCKER_REGISTRY=ghcr.io/yourusername

# Cloud Deployment (optional)
# AWS_REGION=us-east-1
# AZURE_SUBSCRIPTION_ID=...
# GCP_PROJECT_ID=...
